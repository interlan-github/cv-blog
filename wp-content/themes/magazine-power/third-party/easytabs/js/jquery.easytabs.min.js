!function(T){T.easytabs=function(a,t){var i,n,r,h,b,p,u=this,f=T(a),s={animate:!0,panelActiveClass:"active",tabActiveClass:"active",defaultTab:"li:first-child",animationSpeed:"normal",tabs:"> ul > li",updateHash:!0,cycle:!1,collapsible:!1,collapsedClass:"collapsed",collapsedByDefault:!0,uiTabs:!1,transitionIn:"fadeIn",transitionOut:"fadeOut",transitionInEasing:"swing",transitionOutEasing:"swing",transitionCollapse:"slideUp",transitionUncollapse:"slideDown",transitionCollapseEasing:"swing",transitionUncollapseEasing:"swing",containerClass:"",tabsClass:"",tabClass:"",panelClass:"",cache:!0,event:"click",panelContext:f},e={fast:200,normal:400,slow:600},g=(u.init=function(){u.settings=p=T.extend({},s,t),p.bind_str=p.event+".easytabs",p.uiTabs&&(p.tabActiveClass="ui-tabs-selected",p.containerClass="ui-tabs ui-widget ui-widget-content ui-corner-all",p.tabsClass="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all",p.tabClass="ui-state-default ui-corner-top",p.panelClass="ui-tabs-panel ui-widget-content ui-corner-bottom"),p.collapsible&&void 0!==t.defaultTab&&void 0===t.collpasedByDefault&&(p.collapsedByDefault=!1),"string"==typeof p.animationSpeed&&(p.animationSpeed=e[p.animationSpeed]),T("a.anchor").remove().prependTo("body"),f.data("easytabs",{}),u.setTransitions(),u.getTabs(),l(),o(),d(),m(),w(),f.attr("data-easytabs",!0)},u.setTransitions=function(){r=p.animate?{show:p.transitionIn,hide:p.transitionOut,speed:p.animationSpeed,collapse:p.transitionCollapse,uncollapse:p.transitionUncollapse,halfSpeed:p.animationSpeed/2}:{show:"show",hide:"hide",speed:0,collapse:"hide",uncollapse:"show",halfSpeed:0}},u.getTabs=function(){var e;u.tabs=f.find(p.tabs),u.panels=T(),u.tabs.each(function(){var a=T(this),t=a.children("a"),s=a.children("a").data("target");a.data("easytabs",{}),null!=s?a.data("easytabs").ajax=t.attr("href"):s=t.attr("href"),s=s.match(/#([^\?]+)/)[1],(e=p.panelContext.find("#"+s)).length?(e.data("easytabs",{position:e.css("position"),visibility:e.css("visibility")}),e.not(p.panelActiveClass).hide(),u.panels=u.panels.add(e),a.data("easytabs").panel=e):(u.tabs=u.tabs.not(a),"console"in window&&console.warn("Warning: tab without matching panel for selector '#"+s+"' removed from set"))})},u.selectTab=function(a,t){window.location.hash.match(/^[^\?]*/)[0];var s=a.parent().data("easytabs").panel,e=a.parent().data("easytabs").ajax;p.collapsible&&!b&&(a.hasClass(p.tabActiveClass)||a.hasClass(p.collapsedClass))?u.toggleTabCollapse(a,s,e,t):a.hasClass(p.tabActiveClass)&&s.hasClass(p.panelActiveClass)&&p.cache||C(a,s,e,t)},u.toggleTabCollapse=function(e,i,a,t){u.panels.stop(!0,!0),g(f,"easytabs:before",[e,i,p])&&(u.tabs.filter("."+p.tabActiveClass).removeClass(p.tabActiveClass).children().removeClass(p.tabActiveClass),e.hasClass(p.collapsedClass)?(!a||p.cache&&e.parent().data("easytabs").cached||(f.trigger("easytabs:ajax:beforeSend",[e,i]),i.load(a,function(a,t,s){e.parent().data("easytabs").cached=!0,f.trigger("easytabs:ajax:complete",[e,i,a,t,s])})),e.parent().removeClass(p.collapsedClass).addClass(p.tabActiveClass).children().removeClass(p.collapsedClass).addClass(p.tabActiveClass),i.addClass(p.panelActiveClass)[r.uncollapse](r.speed,p.transitionUncollapseEasing,function(){f.trigger("easytabs:midTransition",[e,i,p]),"function"==typeof t&&t()})):(e.addClass(p.collapsedClass).parent().addClass(p.collapsedClass),i.removeClass(p.panelActiveClass)[r.collapse](r.speed,p.transitionCollapseEasing,function(){f.trigger("easytabs:midTransition",[e,i,p]),"function"==typeof t&&t()})))},u.matchTab=function(a){return u.tabs.find("[href='"+a+"'],[data-target='"+a+"']").first()},u.matchInPanel=function(a){return a&&u.validId(a)?u.panels.filter(":has("+a+")").first():[]},u.validId=function(a){return a.substr(1).match(/^[A-Za-z]+[A-Za-z0-9\-_:\.].$/)},u.selectTabFromHashChange=function(){var a,t=window.location.hash.match(/^[^\?]*/)[0],s=u.matchTab(t);p.updateHash&&(s.length?(b=!0,u.selectTab(s)):(a=u.matchInPanel(t)).length?(t="#"+a.attr("id"),s=u.matchTab(t),b=!0,u.selectTab(s)):i.hasClass(p.tabActiveClass)||p.cycle||(""===t||u.matchTab(h).length||f.closest(t).length)&&(b=!0,u.selectTab(n)))},u.cycleTabs=function(a){p.cycle&&(a%=u.tabs.length,$tab=T(u.tabs[a]).children("a").first(),b=!0,u.selectTab($tab,function(){setTimeout(function(){u.cycleTabs(a+1)},p.cycle)}))},u.publicMethods={select:function(a){var t;0===(t=u.tabs.filter(a)).length?0===(t=u.tabs.find("a[href='"+a+"']")).length&&0===(t=u.tabs.find("a"+a)).length&&0===(t=u.tabs.find("[data-target='"+a+"']")).length&&0===(t=u.tabs.find("a[href$='"+a+"']")).length&&T.error("Tab '"+a+"' does not exist in tab set"):t=t.children("a").first(),u.selectTab(t)}},function(a,t,s){t=T.Event(t);return a.trigger(t,s),!1!==t.result}),l=function(){f.addClass(p.containerClass),u.tabs.parent().addClass(p.tabsClass),u.tabs.addClass(p.tabClass),u.panels.addClass(p.panelClass)},o=function(){var a,t=window.location.hash.match(/^[^\?]*/)[0],s=u.matchTab(t).parent();1===s.length?(i=s,p.cycle=!1):(a=u.matchInPanel(t)).length?(t="#"+a.attr("id"),i=u.matchTab(t).parent()):0===(i=u.tabs.parent().find(p.defaultTab)).length&&T.error("The specified default tab ('"+p.defaultTab+"') could not be found in the tab set ('"+p.tabs+"') out of "+u.tabs.length+" tabs."),n=i.children("a").first(),c(s)},c=function(a){var e;p.collapsible&&0===a.length&&p.collapsedByDefault?i.addClass(p.collapsedClass).children().addClass(p.collapsedClass):(e=T(i.data("easytabs").panel),!(a=i.data("easytabs").ajax)||p.cache&&i.data("easytabs").cached||(f.trigger("easytabs:ajax:beforeSend",[n,e]),e.load(a,function(a,t,s){i.data("easytabs").cached=!0,f.trigger("easytabs:ajax:complete",[n,e,a,t,s])})),i.data("easytabs").panel.show().addClass(p.panelActiveClass),i.addClass(p.tabActiveClass).children().addClass(p.tabActiveClass)),f.trigger("easytabs:initialised",[n,e])},d=function(){u.tabs.children("a").bind(p.bind_str,function(a){p.cycle=!1,b=!1,u.selectTab(T(this)),a.preventDefault?a.preventDefault():a.returnValue=!1})},C=function(e,i,a,t){var s,n,l,o,c,d;u.panels.stop(!0,!0),g(f,"easytabs:before",[e,i,p])&&(s=u.panels.filter(":visible"),n=i.parent(),d=window.location.hash.match(/^[^\?]*/)[0],p.animate&&(c=y(i),l=s.length?v(s):0,o=c-l),h=d,c=function(){f.trigger("easytabs:midTransition",[e,i,p]),p.animate&&"fadeIn"==p.transitionIn&&o<0&&n.animate({height:n.height()+o},r.halfSpeed).css({"min-height":""}),p.updateHash&&!b?window.location.hash="#"+i.attr("id"):b=!1,i[r.show](r.speed,p.transitionInEasing,function(){n.css({height:"","min-height":""}),f.trigger("easytabs:after",[e,i,p]),"function"==typeof t&&t()})},!a||p.cache&&e.parent().data("easytabs").cached||(f.trigger("easytabs:ajax:beforeSend",[e,i]),i.load(a,function(a,t,s){e.parent().data("easytabs").cached=!0,f.trigger("easytabs:ajax:complete",[e,i,a,t,s])})),p.animate&&"fadeOut"==p.transitionOut&&(0<o?n.animate({height:n.height()+o},r.halfSpeed):n.css({"min-height":n.height()})),u.tabs.filter("."+p.tabActiveClass).removeClass(p.tabActiveClass).children().removeClass(p.tabActiveClass),u.tabs.filter("."+p.collapsedClass).removeClass(p.collapsedClass).children().removeClass(p.collapsedClass),e.parent().addClass(p.tabActiveClass).children().addClass(p.tabActiveClass),u.panels.filter("."+p.panelActiveClass).removeClass(p.panelActiveClass),i.addClass(p.panelActiveClass),s.length?s[r.hide](r.speed,p.transitionOutEasing,c):i[r.uncollapse](r.speed,p.transitionUncollapseEasing,c))},y=function(a){if(a.data("easytabs")&&a.data("easytabs").lastHeight)return a.data("easytabs").lastHeight;var t,s=a.css("display");try{t=T("<div></div>",{position:"absolute",visibility:"hidden",overflow:"hidden"})}catch(a){t=T("<div></div>",{visibility:"hidden",overflow:"hidden"})}return t=a.wrap(t).css({position:"relative",visibility:"hidden",display:"block"}).outerHeight(),a.unwrap(),a.css({position:a.data("easytabs").position,visibility:a.data("easytabs").visibility,display:s}),a.data("easytabs").lastHeight=t},v=function(a){var t=a.outerHeight();return a.data("easytabs")?a.data("easytabs").lastHeight=t:a.data("easytabs",{lastHeight:t}),t},m=function(){"function"==typeof T(window).hashchange?T(window).hashchange(function(){u.selectTabFromHashChange()}):T.address&&"function"==typeof T.address.change&&T.address.change(function(){u.selectTabFromHashChange()})},w=function(){var a;p.cycle&&(a=u.tabs.index(i),setTimeout(function(){u.cycleTabs(a+1)},p.cycle))};u.init()},T.fn.easytabs=function(s){var e=arguments;return this.each(function(){var a=T(this),t=a.data("easytabs");if(void 0===t&&(t=new T.easytabs(this,s),a.data("easytabs",t)),t.publicMethods[s])return t.publicMethods[s](Array.prototype.slice.call(e,1))})}}(jQuery);